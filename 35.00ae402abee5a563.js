"use strict";(self.webpackChunkbudgetkey=self.webpackChunkbudgetkey||[]).push([[35],{8035:(st,D,c)=>{c.r(D),c.d(D,{SearchModule:()=>rt});var g=c(6814),m=c(3654),x=c(8666),v=c(8024),e=c(9468),q=c(6509),C=c(7582),J=c(7328);class E{constructor(t){t&&(this.term=t.term,this.docType=t.docType,this.offset=t.offset,this.pageSize=t.pageSize,this.filters=t.filters,this.ordering=t.ordering,this.context=t.context)}}function z(...r){const t=[];for(let n of r)n&&(Array.isArray(n)||(n=[n]),t.push(n));for(;t.length>1;){const n=t.shift(),o=t.shift(),s=[];for(const i of n)for(const a of o){let l=!1;for(const f of Object.keys(i))if((!Array.isArray(i[f])||!i[f].includes(a[f]))&&a[f]&&a[f]!==i[f]){l=!0;break}l||s.push(Object.assign({},i,a))}t.unshift(s)}return t[0]}class X{constructor(t){this.docTypes=t,this.searchQueue=new J.t(1),this.enabled=!1,this._docType=this.docTypes[0]}set term(t){this._term!==t&&(this._term=t,this.initiateSearch())}get term(){return this._term}set docType(t){if(t!==this._docType){if(this._docType=t,t.filterMenu)for(const n of t.filterMenu)n.selected||(n.selected=n.options[0]);this.initiateSearch()}}get docType(){return this._docType}set filters(t){this._filters=t,this.initiateSearch()}get filters(){return this._filters}setSearchContext(t){this.searchContext=Array.isArray(t)?t.join(" "):null}initiateSearch(){if(!this.enabled)return;const t=new E;t.term=this._term,t.docType=this._docType,t.offset=0,t.pageSize=10,t.context=this.searchContext;const n=[];if(n.push(t.docType.filters),t.docType.filterMenu)for(const o of t.docType.filterMenu)o.selected?.filters&&n.push(o.selected.filters);t.filters=z(...n),this._term||(t.ordering=t.docType.ordering),this.searchQueue.next(t)}start(){this.enabled||(this.enabled=!0,this.initiateSearch())}}var b,h=c(8791),V=c(4825),d=c(6751);function W(r,t){if(1&r){const n=e.EpF();e.ynx(0),e.TgZ(1,"search-tag",15),e.NdJ("select",function(){const i=e.CHM(n).$implicit,a=e.oxw(2);return e.KtG(a.onDocTypeSelected(i))}),e.qZA(),e.BQk()}if(2&r){const n=t.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("name",n.name)("amount",n.amount)("selected",o.searchState.docType===n)("bare",o.bare)}}const N=function(){return[]};function ee(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"search-filter-menu-bar",16),e.NdJ("selected",function(){e.CHM(n);const s=e.oxw(2);return e.KtG(s.onSearchFilterMenuChange())}),e.qZA()}if(2&r){const n=e.oxw(2);e.Q6J("menus",n.searchState.docType.filterMenu||e.DdM(2,N))("bare",n.bare)}}function te(r,t){if(1&r){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",2)(2,"div",3),e.YNc(3,W,2,4,"ng-container",4),e.qZA(),e.TgZ(4,"div",5)(5,"div",6),e.SDv(6,7),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"a",8),e.SDv(9,9),e.qZA()()(),e.TgZ(10,"div",10)(11,"div",11)(12,"label"),e.SDv(13,12),e.qZA(),e.TgZ(14,"app-bare-search-bar",13),e.NdJ("search",function(s){e.CHM(n);const i=e.oxw();return e.KtG(i.onTermChanged(s))}),e.qZA()(),e.YNc(15,ee,1,3,"search-filter-menu-bar",14),e.qZA(),e.BQk()}if(2&r){const n=e.oxw();e.xp6(3),e.Q6J("ngForOf",n.docTypes),e.xp6(4),e.pQV(e.lcZ(7,5,n.docTypes[0].amount)),e.QtT(6),e.xp6(7),e.Q6J("term",n.searchState.term)("config",n.searchState.docType),e.xp6(1),e.Q6J("ngIf","all"!==n.searchState.docType.id)}}function ne(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"search-tag",21),e.NdJ("select",function(){e.CHM(n);const s=e.oxw().$implicit,i=e.oxw(3);return e.KtG(i.onDocTypeSelected(s))}),e.qZA()}if(2&r){const n=e.oxw().$implicit,o=e.oxw(3);e.Q6J("name",n.name)("amount",n.amount)("selected",o.searchState.docType===n)("main",!0)}}function oe(r,t){if(1&r&&(e.ynx(0),e.YNc(1,ne,1,4,"search-tag",20),e.BQk()),2&r){const n=t.$implicit;e.xp6(1),e.Q6J("ngIf","all"===n.id)}}function re(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"search-tag",21),e.NdJ("select",function(){e.CHM(n);const s=e.oxw().$implicit,i=e.oxw(3);return e.KtG(i.onDocTypeSelected(s))}),e.qZA()}if(2&r){const n=e.oxw().$implicit,o=e.oxw(3);e.Q6J("name",n.name)("amount",n.amount)("selected",o.searchState.docType===n)("main",!0)}}function se(r,t){if(1&r&&(e.ynx(0),e.YNc(1,re,1,4,"search-tag",20),e.BQk()),2&r){const n=t.$implicit;e.xp6(1),e.Q6J("ngIf","all"!==n.id)}}function ie(r,t){if(1&r&&(e.ynx(0),e.TgZ(1,"div",19)(2,"div"),e.YNc(3,oe,2,1,"ng-container",4),e.qZA(),e.TgZ(4,"div"),e.YNc(5,se,2,1,"ng-container",4),e.qZA()(),e.BQk()),2&r){const n=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",n.docTypes),e.xp6(2),e.Q6J("ngForOf",n.docTypes)}}function ae(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"search-filter-menu-bar",22),e.NdJ("selected",function(){e.CHM(n);const s=e.oxw(2);return e.KtG(s.onSearchFilterMenuChange())}),e.qZA()}if(2&r){const n=e.oxw(2);e.Q6J("menus",n.searchState.docType.filterMenu||e.DdM(1,N))}}function ce(r,t){if(1&r){const n=e.EpF();e.ynx(0),e.TgZ(1,"app-bk-search-bar",17),e.NdJ("search",function(s){e.CHM(n);const i=e.oxw();return e.KtG(i.onTermChanged(s))})("selected",function(s){e.CHM(n);const i=e.oxw();return e.KtG(i.onDocTypeSelected(s))}),e.qZA(),e.YNc(2,ie,6,2,"ng-container",0),e.YNc(3,ae,1,2,"search-filter-menu-bar",18),e.BQk()}if(2&r){const n=e.oxw();e.xp6(1),e.Q6J("searchTerm",n.searchState.term)("selectedSearchType",n.searchState.docType)("isSearching",n.isSearching)("allowSubscribe",!0)("externalTitle",n.searchState.term)("externalUrlParams",n.subscriptionUrlParams)("externalProperties",n.subscriptionProperties),e.xp6(1),e.Q6J("ngIf",!n.isSearching),e.xp6(1),e.Q6J("ngIf","all"!==n.searchState.docType.id)}}let T=((b=class{constructor(t,n,o,s,i){this.route=t,this.router=n,this.globalSettings=o,this.ps=s,this.seo=i,this.bare=!1,this.subscriptionProperties={},this.isSearching=!1,this.searchState=new X(this.globalSettings.theme.searchBarConfig),this.docTypes=this.globalSettings.theme.searchBarConfig,this.globalSettings.theme.__tttt__=1,this.searchState.searchContext=this.globalSettings.theme.searchContext}ngOnInit(){this.searchState.searchQueue.pipe((0,h.t)(this)).subscribe(t=>{this.subscriptionUrlParams="",this.globalSettings.lang&&(this.subscriptionUrlParams+=`&lang=${this.globalSettings.lang}`),this.globalSettings.themeId&&(this.subscriptionUrlParams+=`&theme=${this.globalSettings.themeId}`);const n={};if(t.docType.filterMenu)for(const o of t.docType.filterMenu)o.selected&&(this.subscriptionUrlParams+="&"+o.id+"="+o.selected.id,n[o.id]=o.selected.id);n.q=t.term||"",n.dd=t.docType.id,this.router.navigate([],{queryParams:n,queryParamsHandling:"merge",replaceUrl:!0}),this.updateSubscriptionProperties(t),this.ps.browser(()=>{const o=window.gtag;0===t.offset&&(o&&o("event","search",{search_term:t.term,kinds:t.docType.id}),this.seo.setSeo(this.globalSettings.siteName+" - \u05d7\u05d9\u05e4\u05d5\u05e9 "+t.term,`https://next.obudget.org/s?q=${encodeURIComponent(t.term)}`))})}),this.route.queryParams.pipe((0,h.t)(this)).subscribe(t=>{if(t.q&&(this.searchState.term=t.q),t.dd)for(const n of this.docTypes)if(n.id===t.dd){this.searchState.docType=n;break}if(this.searchState.docType.filterMenu)for(const n of this.searchState.docType.filterMenu){if(t[n.id])for(const o of n.options)if(t[n.id]===o.id){n.selected=o;break}n.selected||(n.selected=n.options[0])}return this.searchState.start(),null})}onTermChanged(t){this.searchState.term=t}onDocTypeSelected(t){this.searchState.docType=t}onSearchFilterMenuChange(){this.searchState.initiateSearch()}updateSubscriptionProperties(t){this.subscriptionProperties=Object.assign({},t),this.subscriptionProperties.kind="search",delete this.subscriptionProperties.offset,delete this.subscriptionProperties.pageSize}setIsSearching(t){(0,V.H)(0).subscribe(()=>{this.isSearching=t})}}).\u0275fac=function(t){return new(t||b)(e.Y36(m.gz),e.Y36(m.F0),e.Y36(x.o),e.Y36(d.m),e.Y36(v.v))},b.\u0275cmp=e.Xpm({type:b,selectors:[["app-search"]],inputs:{bare:"bare"},decls:3,vars:4,consts:function(){let r,t,n;return r=$localize`נמצאו ${"\ufffd0\ufffd"}:INTERPOLATION: תוצאות`,t=$localize`הרחיבו את החיפוש באתר מפתח התקציב`,n=$localize`סינון התוצאות`,[[4,"ngIf"],[3,"bare","state","searching"],[1,"bare-header"],[1,"bare-count-tags"],[4,"ngFor","ngForOf"],[1,"bare-info"],[1,"bare-found-results"],r,["href","https://next.obudget.org/s","target","_blank",1,"bare-more-results-link"],t,[1,"bare-search-controls"],[1,"bare-search-control"],n,[3,"term","config","search"],[3,"menus","bare","selected",4,"ngIf"],[3,"name","amount","selected","bare","select"],[3,"menus","bare","selected"],[3,"searchTerm","selectedSearchType","isSearching","allowSubscribe","externalTitle","externalUrlParams","externalProperties","search","selected"],[3,"menus","selected",4,"ngIf"],["role","tablist",1,"count-tags"],[3,"name","amount","selected","main","select",4,"ngIf"],[3,"name","amount","selected","main","select"],[3,"menus","selected"]]},template:function(t,n){1&t&&(e.YNc(0,te,16,7,"ng-container",0),e.YNc(1,ce,4,9,"ng-container",0),e.TgZ(2,"search-mode-selector",1),e.NdJ("searching",function(s){return n.setIsSearching(s)}),e.qZA()),2&t&&(e.Q6J("ngIf",n.bare),e.xp6(1),e.Q6J("ngIf",!n.bare),e.xp6(1),e.Q6J("bare",n.bare)("state",n.searchState))},styles:['.font-gadi[_ngcontent-%COMP%]{font-family:Gadi Almog,sans-serif;font-style:normal}.font-abraham[_ngcontent-%COMP%]{font-family:Abraham TRIAL,sans-serif;font-style:normal}.font-miriam[_ngcontent-%COMP%]{font-family:Miriam Libre,sans-serif;font-style:normal}.background-image[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:center;background-size:contain}.no-scrollbars[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:-ms-autohiding-scrollbar}.no-scrollbars[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.ellipsis-2-line[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;display:-webkit-box!important;-webkit-line-clamp:2;-webkit-box-orient:vertical;white-space:normal}@media only screen and (max-width: 999px){  .layout-desktop{display:none!important}}@media only screen and (min-width: 1000px){  .layout-mobile{display:none!important}}  .display-none{display:block;width:0;height:0;overflow:hidden}.loading[_ngcontent-%COMP%]{box-sizing:border-box;overflow:hidden;position:relative;background:#eff1f6 no-repeat;display:inline-block;will-change:transform;transform:translateZ(0)}.loading[_ngcontent-%COMP%]:after, .loading[_ngcontent-%COMP%]:before{box-sizing:border-box}.loading[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_progress 2s ease-in-out infinite;background-size:200px 100%;position:absolute;z-index:1;top:0;left:0;width:200px;height:100%;content:""}.loading[_ngcontent-%COMP%]:before{background-image:linear-gradient(90deg,rgba(255,255,255,0),rgba(255,255,255,.6),rgba(255,255,255,0))}@keyframes _ngcontent-%COMP%_progress{0%{transform:translate3d(-200px,0,0)}to{transform:translate3d(calc(200px + 100vw),0,0)}}[_nghost-%COMP%]{display:flex;flex-flow:column;align-items:center;width:100%}@media only screen and (max-width: 999px){[_nghost-%COMP%]{padding:0 16px}}[_nghost-%COMP%]   .count-tags[_ngcontent-%COMP%]{display:flex;flex-flow:row;margin:0;justify-content:flex-start;align-items:center;width:100%;max-width:800px}[_nghost-%COMP%]   .count-tags[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-flow:row;flex-wrap:wrap;margin:0 10px;justify-content:flex-start;align-items:center}@media only screen and (max-width: 600px){[_nghost-%COMP%]   .count-tags[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{justify-content:center}}[_nghost-%COMP%]   .count-tags[_ngcontent-%COMP%]   search-tag[_ngcontent-%COMP%]{cursor:pointer}@media only screen and (max-width: 600px){[_nghost-%COMP%]   .count-tags[_ngcontent-%COMP%]{flex-flow:column}}[_nghost-%COMP%]   app-bk-search-bar[_ngcontent-%COMP%]{width:100%;max-width:800px}[_nghost-%COMP%]   .bare-header[_ngcontent-%COMP%]{width:100%;display:flex;flex-flow:row wrap;align-items:center;font-family:Abraham TRIAL}[_nghost-%COMP%]   .bare-header[_ngcontent-%COMP%]   .bare-count-tags[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:center;flex:1000 1 auto;margin-bottom:8px}[_nghost-%COMP%]   .bare-header[_ngcontent-%COMP%]   .bare-info[_ngcontent-%COMP%]{margin-right:auto;display:flex;flex-flow:row wrap;align-items:center;justify-content:space-between;flex:1 1 auto;border-bottom:3px solid transparent}[_nghost-%COMP%]   .bare-header[_ngcontent-%COMP%]   .bare-info[_ngcontent-%COMP%]   .bare-found-results[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:22px;color:#787878;margin-left:16px;margin-bottom:8px}[_nghost-%COMP%]   .bare-header[_ngcontent-%COMP%]   .bare-info[_ngcontent-%COMP%]   .bare-more-results-link[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:25px;text-decoration:underline!important;color:#ff5a5f;white-space:nowrap;margin-bottom:8px}[_nghost-%COMP%]   .bare-search-controls[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:flex-start;margin:28px 0 16px;width:100%}[_nghost-%COMP%]   .bare-search-controls[_ngcontent-%COMP%]   .bare-search-control[_ngcontent-%COMP%]{display:flex;flex-flow:column;align-items:flex-start;flex:100 1 400px;margin-bottom:12px}[_nghost-%COMP%]   .bare-search-controls[_ngcontent-%COMP%]   .bare-search-control[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-style:normal;font-weight:700;font-size:14px;line-height:19px;margin-bottom:4px}']}),b);function le(r,t){1&r&&(e.TgZ(0,"div",2),e._UZ(1,"app-search"),e.qZA())}T=(0,C.gn)([(0,h.c)(),(0,C.w6)("design:paramtypes",[m.gz,m.F0,x.o,d.m,v.v])],T);let ge=(()=>{var r;class t{constructor(o,s){this.globalSettings=o,this.seo=s,this.init=!1,o.ready.subscribe(()=>{this.init=!0})}ngOnInit(){this.globalSettings.ready.subscribe(()=>{this.seo.setSeo(this.globalSettings.siteName+" - \u05d7\u05d9\u05e4\u05d5\u05e9","https://next.obudget.org/s")})}}return(r=t).\u0275fac=function(o){return new(o||r)(e.Y36(x.o),e.Y36(v.v))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-search-page"]],decls:2,vars:2,consts:[[3,"listSideView"],["class","inner",4,"ngIf"],[1,"inner"]],template:function(o,s){1&o&&(e.TgZ(0,"app-container",0),e.YNc(1,le,2,0,"div",1),e.qZA()),2&o&&(e.Q6J("listSideView",!0),e.xp6(1),e.Q6J("ngIf",s.init))},dependencies:[g.O5,q.b,T],styles:["[_nghost-%COMP%]   .inner[_ngcontent-%COMP%]{width:100%}"]}),t})();var M,Q=c(1101),he=c(8546);const de=["search"];function pe(r,t){if(1&r&&(e.ynx(0),e._UZ(1,"app-bk-subscription-manager",9),e.BQk()),2&r){e.oxw();const n=e.MAs(2),o=e.oxw();e.xp6(1),e.Q6J("term",n.searchState.term)("docType",o.all)("externalTitle",o.globalSettings.theme.siteName+": "+n.searchState.term)("externalProperties",n.subscriptionProperties)("externalUrl",o.externalUrl())("newWindow",!0)}}function _e(r,t){if(1&r&&(e.ynx(0),e._UZ(1,"app-search",1,2),e.TgZ(3,"div",3)(4,"div",4),e.YNc(5,pe,2,6,"ng-container",0),e.qZA(),e.TgZ(6,"div",5),e._UZ(7,"img",6),e.TgZ(8,"span"),e.tHW(9,7),e._UZ(10,"a",8),e.N_p(),e.qZA()()(),e.BQk()),2&r){const n=e.MAs(2);e.xp6(1),e.Q6J("bare",!0),e.xp6(4),e.Q6J("ngIf",n&&n.searchState&&n.searchState.term)}}let A=((M=class{constructor(t,n,o){this.globalSettings=t,this.ps=n,this.route=o,this.init=!1,t.init(this,o)}ngOnInit(){this.globalSettings.ready.subscribe(()=>{this.all=this.globalSettings.theme.searchBarConfig[0],this.init=!0})}externalUrl(){return Q.Fn.buildExternalUrl(this.search.searchState.term||"",this.all,this.search.subscriptionUrlParams,this.globalSettings.theme,this.globalSettings.lang,this.ps.browser()?window.location.hostname:"next.obudget.org")[0]}}).\u0275fac=function(t){return new(t||M)(e.Y36(x.o),e.Y36(d.m),e.Y36(m.gz))},M.\u0275cmp=e.Xpm({type:M,selectors:[["app-bare-page"]],viewQuery:function(t,n){if(1&t&&e.Gf(de,5),2&t){let o;e.iGM(o=e.CRH())&&(n.search=o.first)}},decls:1,vars:1,consts:function(){let r;return r=$localize`תוצאות מעודכנות מתוך ${"\ufffd#10\ufffd"}:START_LINK:אתר מפתח תקציב${"\ufffd/#10\ufffd"}:CLOSE_LINK:`,[[4,"ngIf"],[3,"bare"],["search",""],[1,"footer"],[1,"signup"],[1,"credits"],["src","assets/search/img/budgetkey-red-key-logo.svg"],r,["href","http://next.obudget.org/","target","_blank"],[3,"term","docType","externalTitle","externalProperties","externalUrl","newWindow"]]},template:function(t,n){1&t&&e.YNc(0,_e,11,2,"ng-container",0),2&t&&e.Q6J("ngIf",n.init)},dependencies:[g.O5,he.v,T],styles:["[_nghost-%COMP%]   .inner[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]{display:block;padding:40px 40px 100px}@media only screen and (max-width: 600px){[_nghost-%COMP%]{padding:24px 24px 100px}}[_nghost-%COMP%]   .footer[_ngcontent-%COMP%]{position:fixed;width:100%;bottom:0;left:0;display:flex;flex-flow:row wrap;align-items:center;justify-content:space-between;padding:24px 40px;background:#f9f9f9;box-shadow:0 0 10px 5px #0006}@media only screen and (max-width: 600px){[_nghost-%COMP%]   .footer[_ngcontent-%COMP%]{padding:16px 24px;justify-content:center}}[_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .signup[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:25px;text-decoration:underline;cursor:pointer;padding:8px 16px;border-radius:8px}[_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .signup[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:14px}[_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .credits[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .credits[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:25px;color:#787878}[_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .credits[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .credits[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .credits[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{text-decoration:underline!important;color:#ff5a5f;white-space:nowrap}[_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .credits[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:12px}"]}),M);A=(0,C.gn)([(0,h.c)(),(0,C.w6)("design:paramtypes",[x.o,d.m,m.gz])],A);const fe=[{path:"",component:ge},{path:"bare",component:A}];let ue=(()=>{var r;class t{}return(r=t).\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[m.Bz.forChild(fe),m.Bz]}),t})();var me=c(4063),xe=c(438),_=c(6223);let Ce=(()=>{var r;class t{constructor(o,s){this.auth=o,this.ps=s,this.config={},this.term="",this.search=new e.vpe,this.ps.browser(()=>{this.auth.check().subscribe(i=>{})})}ngOnInit(){}onKeyup(o){this.search.next(o.target.value)}}return(r=t).\u0275fac=function(o){return new(o||r)(e.Y36(xe.e),e.Y36(d.m))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-bare-search-bar"]],inputs:{config:"config",term:"term"},outputs:{search:"search"},decls:3,vars:2,consts:[[1,"input"],["type","text",3,"ngModel","placeholder","ngModelChange","keyup"],["src","assets/search/img/bare-search-icon.svg"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("ngModelChange",function(a){return s.term=a})("keyup",function(a){return s.onKeyup(a)}),e.qZA(),e._UZ(2,"img",2),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngModel",s.term)("placeholder",s.config.placeholder))},dependencies:[_.Fj,_.JJ,_.On],styles:["[_nghost-%COMP%]{width:100%;max-width:400px;display:block}[_nghost-%COMP%]   .input[_ngcontent-%COMP%]{height:34px;width:100%;position:relative;display:flex;flex-flow:row;align-items:center}[_nghost-%COMP%]   .input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:100%;width:100%;border:1px solid #E6E6E6;box-sizing:border-box;font-size:12px;line-height:16px;padding:0 30px}[_nghost-%COMP%]   .input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#787878}[_nghost-%COMP%]   .input[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;right:8px}"]}),t})();var be=c(2438),Me=c(927),I=c(3620),S=c(4664),B=c(9397),H=c(5177),ye=c(8753),Oe=c(8180),Y=c(2181),k=c(7715),R=c(7398),Te=c(9862);const Se=["tenders","history","explanation","semantic_tags","__date_range_months","__date_range_from","__date_range_to"];let y=(()=>{var r;class t{constructor(o,s){this.http=o,this.ps=s,this.cache_={},this.URL="https://next.obudget.org/search"}cache(o,s,i){return this.cache_[o]?i=(0,k.D)([this.cache_[o]]):s.term||(i=this.ps.cachedRequest(o,i)),i.pipe((0,R.U)(a=>{const l=a;return this.cache_[o]=l,l.params=s,l}))}search(o){const s=o.docType.types.join(","),i=`${this.URL}/${s}`,a={size:o.pageSize,offset:o.offset};if(o.term&&(a.q=o.term),o.filters){const u=JSON.stringify(o.filters);a.filter=u}o.ordering&&(a.order=o.ordering),o.context&&(a.context=o.context);const l=`${i}${a.q}${a.filter}${a.order}${a.context}${a.size}${a.offset}`,f=this.http.get(i,{params:a}).pipe((0,R.U)(u=>{const w=u;return w.search_results.forEach(p=>{for(const K of Se)p.source.hasOwnProperty(K)&&delete p.source[K]}),w}));return this.cache(l,o,f)}count(o,s){let i=`${this.URL}/count`;const a=s.map(p=>({id:p.id,doc_types:p.types,filters:p.filters||{}}));let l="";a.forEach(p=>{l+=p.id+p.doc_types.join(",")+JSON.stringify(p.filters)});const u={config:JSON.stringify(a)};return o.term&&(u.q=o.term),o.context&&(u.context=o.context),this.cache(`${i}${u.q}${u.context}${l}`,o,this.http.get(i,{params:u}))}}return(r=t).\u0275fac=function(o){return new(o||r)(e.LFG(Te.eN),e.LFG(d.m))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),t})();var we=c(8645),ve=c(3019),Ee=c(6232),Ae=c(6306);class ke{constructor(t,n,o){this.docs=t,this.isSearching=n,this.isErrorInLastSearch=o}}class ${constructor(t,n,o,s,i,a){this.api=t,this.state=n,this.docTypes=o,this.debounce=s,this.component=i,this.moreQueue=new we.x,this.done=!1,this.last=new E,this.allResults=[],this.searchResults=new J.t(1),a||(a=l=>l),(0,ve.T)(this.moreQueue,n.searchQueue).pipe((0,h.t)(this.component),(0,Y.h)(l=>!!l),(0,R.U)(l=>(a&&(l=a(l)),this.last=l,l)),(0,I.b)(this.debounce),(0,S.w)(l=>this.doRequest(l)),(0,S.w)(l=>this.processResults(l)),(0,S.w)(l=>this.processResults(l)),(0,Ae.K)(l=>(this.updateResults([],!1,!0),console.log("Error while searching:",l),Ee.E))).subscribe()}getMore(){this.done||(this.last.offset=this.allResults.length,this.last.pageSize=10,this.moreQueue.next(this.last))}updateResults(t,n,o){this.allResults=t;const s=new ke(t,n,!!o);this.searchResults.next(s)}doRequest(t){return 0===t.offset&&this.updateResults([],!0),this.api.search(t)}doCountRequest(t){const n=this.docTypes.filter(o=>o!==t.docType);return n.length>0?this.api.count(t,n):(0,k.D)([])}processResults(t){if(t&&t.params){if(t.search_counts)for(let n of Object.keys(t.search_counts)){const o=t.search_counts[n].total_overall;"_current"===n&&(n=t.params.docType.id,this.done=t.params.offset+t.search_results.length>=o);for(const s of this.docTypes)if(s.id===n){s.amount=o;break}}if(t.search_results&&(this.allResults=this.allResults.slice(0,t.params.offset),this.allResults.push(...t.search_results),this.updateResults(this.allResults,t.params!==this.last),this.allResults.length&&0===t?.params?.offset))return this.doCountRequest(t.params)}return(0,k.D)([])}}var L=c(7991),U=c(9163),Re=c(2033);let G=(()=>{var r;class t{constructor(){this.selected=!1,this.main=!1,this.bare=!1,this.select=new e.vpe}ngOnChanges(o){}select_(){this.select.emit()}}return(r=t).\u0275fac=function(o){return new(o||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["search-tag"]],inputs:{name:"name",amount:"amount",selected:"selected",main:"main",bare:"bare"},outputs:{select:"select"},features:[e.TTD],decls:6,vars:14,consts:[["clickOnReturn","",1,"search-tag",3,"activated"],[1,"search-tag-name"],[1,"search-tag-amount"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0),e.NdJ("activated",function(){return s.select_()}),e.TgZ(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e._uU(4),e.ALo(5,"number"),e.qZA()()),2&o&&(e.ekj("bare",s.bare),e.uIk("aria-label","\u05e1\u05d9\u05e0\u05d5\u05df "+s.name+" - "+(s.amount||0).toLocaleString()+" \u05ea\u05d5\u05e6\u05d0\u05d5\u05ea")("aria-current",s.selected?"tab":null),e.xp6(1),e.ekj("selected",s.selected)("main",s.main),e.xp6(1),e.Oqu(s.name),e.xp6(1),e.ekj("selected",s.selected),e.xp6(1),e.Oqu(e.lcZ(5,12,s.amount)))},dependencies:[Re.Y,g.JJ],styles:[".search-tag[_ngcontent-%COMP%]{font-family:Abraham TRIAL;font-size:16px;font-weight:400;color:#7d7d7d;display:flex;flex-flow:row;margin:4px 0}.search-tag[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0 2px;margin:0 5px;border:2px solid #edeef0}.search-tag[_ngcontent-%COMP%]   div.selected[_ngcontent-%COMP%]{border-color:#ff5a5f}.search-tag[_ngcontent-%COMP%]   div.search-tag-name[_ngcontent-%COMP%]{background-color:#edeef0;border-top-right-radius:4px;border-bottom-right-radius:4px;margin-left:0;white-space:nowrap;cursor:pointer}.search-tag[_ngcontent-%COMP%]   div.search-tag-name.selected[_ngcontent-%COMP%]{background-color:#ff5a5f;color:#fff}.search-tag[_ngcontent-%COMP%]   div.search-tag-name.main[_ngcontent-%COMP%]{text-decoration:underline}.search-tag[_ngcontent-%COMP%]   div.search-tag-name.main.selected[_ngcontent-%COMP%]{text-decoration:none}.search-tag[_ngcontent-%COMP%]   div.search-tag-amount[_ngcontent-%COMP%]{margin-right:-2px;border-top-left-radius:4px;border-bottom-left-radius:4px}.search-tag[_ngcontent-%COMP%]   div.search-tag-amount.selected[_ngcontent-%COMP%]{background-color:#fcebec;color:#ff5a5f}.search-tag.bare[_ngcontent-%COMP%]{font-weight:400;line-height:22px;color:#000;margin:0 0 0 24px}@media only screen and (max-width: 600px){.search-tag.bare[_ngcontent-%COMP%]{margin-left:16px}}.search-tag.bare[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0}.search-tag.bare[_ngcontent-%COMP%]   div.search-tag-name[_ngcontent-%COMP%]{border:none;background-color:inherit;border-bottom:3px solid transparent;border-radius:0}.search-tag.bare[_ngcontent-%COMP%]   div.search-tag-name.selected[_ngcontent-%COMP%]{background-color:inherit;color:#54364c;border-color:#54364c}.search-tag.bare[_ngcontent-%COMP%]   div.search-tag-amount[_ngcontent-%COMP%]{display:none}"]}),t})();var O;const Fe=["cards"];function Ze(r,t){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&r){const n=e.oxw(3);e.xp6(1),e.hij("(",e.lcZ(2,1,n.searchManager.last.docType.amount),")")}}function De(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"div",13),e.NdJ("click",function(){e.CHM(n);const s=e.oxw(2);return e.KtG(s.titleClicked())}),e._uU(1),e.YNc(2,Ze,3,3,"span",1),e.qZA()}if(2&r){const n=e.oxw(2);e.xp6(1),e.hij(" ",n.searchManager.last.docType.name," "),e.xp6(1),e.Q6J("ngIf",n.searchManager.last.docType.amount)}}function Je(r,t){if(1&r&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&r){const n=e.oxw(2);e.xp6(1),e.Oqu(n.searchManager.last.docType.description)}}function ze(r,t){if(1&r&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&r){const n=e.oxw(2);e.xp6(1),e.Oqu(n.searchManager.last.docType.description)}}function Ne(r,t){if(1&r&&e._UZ(0,"search-result",16),2&r){const n=t.$implicit,o=t.index,s=e.oxw(2);e.Q6J("item",n)("index",o)("kind",n.type)("horizontal",!0)("bare",s.bare)}}function Qe(r,t){1&r&&e._UZ(0,"div",17)}function Ie(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"search-tag",21),e.NdJ("select",function(){e.CHM(n);const s=e.oxw().$implicit,i=e.oxw(3);return e.KtG(i.optionClicked(s))}),e.qZA()}if(2&r){const n=e.oxw().$implicit;e.Q6J("name",n.display)("amount",n.amount)}}function Be(r,t){if(1&r&&(e.ynx(0),e.YNc(1,Ie,1,2,"search-tag",20),e.BQk()),2&r){const n=t.$implicit,o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.docTypes[0]!==n&&n.amount)}}function He(r,t){if(1&r&&(e.TgZ(0,"div",18),e.YNc(1,Be,2,1,"ng-container",19),e.qZA()),2&r){const n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.docTypes)}}const Ye=function(){return[]};function $e(r,t){if(1&r){const n=e.EpF();e.ynx(0),e.YNc(1,De,3,2,"div",2),e.YNc(2,Je,2,1,"div",3),e.TgZ(3,"div",4)(4,"div",5),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.scroll(1))}),e.qZA(),e.TgZ(5,"div",6,7),e.YNc(7,ze,2,1,"div",8),e.YNc(8,Ne,1,5,"search-result",9),e.ALo(9,"async"),e.YNc(10,Qe,1,0,"div",10),e.qZA(),e.TgZ(11,"div",11),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.scroll(-1))}),e.qZA()(),e.YNc(12,He,2,1,"div",12),e.BQk()}if(2&r){const n=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",n.searchManager.last.docType),e.xp6(1),e.Q6J("ngIf",n.searchManager.last.docType),e.xp6(2),e.ekj("visible",n.showRightFade),e.xp6(1),e.ekj("refresh",n.refresh),e.xp6(2),e.Q6J("ngIf",n.searchManager.last.docType),e.xp6(1),e.Q6J("ngForOf",(null==(o=e.lcZ(9,12,n.searchManager.searchResults))?null:o.docs)||e.DdM(14,Ye)),e.xp6(2),e.Q6J("ngIf",!n.searchManager.done),e.xp6(1),e.ekj("visible",n.showLeftFade),e.xp6(1),e.Q6J("ngIf",n.docTypes.length>1)}}let F=((O=class{constructor(t,n,o){this.searchService=t,this.ps=n,this.layout=o,this.bare=!1,this.searching=new e.vpe,this.clicked=new e.vpe,this.gotMore=!1,this.showLeftFade=!1,this.showRightFade=!1,this.refresh=!1}ngOnInit(){if(this.docTypes=[this.docType],this.docType.score=0,this.docType.filterMenu&&this.docType.filterMenu.length>0)for(const t of this.docType.filterMenu[0].options)this.docTypes.push(Object.assign({},this.docType,{id:t.id,display:t.display,filters:z(this.docType.filters,t.filters)}));this.state.searchQueue.pipe((0,h.t)(this),(0,I.b)(this.ps.browser()?1e3:0),(0,S.w)(t=>this.searchService.search({docType:this.docTypes[0],offset:0,pageSize:1,term:t.term,filters:this.docType.filters,context:this.state.searchContext,ordering:t.term?null:this.docType.ordering}))).subscribe(t=>{t&&t.search_results&&t.search_results.length>0&&(this.docType.score=t.search_results[0].score),t.search_counts&&"all"===this.docType.id&&(this.docType.amount=t.search_counts._current.total_overall||0)}),"all"!==this.docType.id&&(this.searchManager=new $(this.searchService,this.state,this.docTypes,1e3,this,t=>{if(0===t.offset){const n=new E(t);return n.docType=this.docType,n.filters=this.docType.filters,n.pageSize=3,n}return t.pageSize=10,t}),this.searchManager.searchResults.pipe((0,h.t)(this),(0,B.b)(t=>{this.lastOutcome=t,this.searching.emit(t.isSearching),this.showLeftFade=!0,this.refresh=!this.refresh}),(0,H.g)(100),(0,B.b)(()=>{this.refresh=!this.refresh,this.scrollHandler(this.cards.nativeElement)})).subscribe())}ngAfterViewInit(){this.ps.browser(()=>{this.cards?.nativeElement&&(0,be.R)(this.cards.nativeElement,"scroll").pipe((0,h.t)(this),(0,ye.p)(150,Me.Z),(0,H.g)(150)).subscribe(t=>{this.scrollHandler(t.target)})})}ngOnDestroy(){}shouldShow(){return"all"!==this.docType.id&&this.lastOutcome&&!this.lastOutcome.isSearching&&!this.lastOutcome.isErrorInLastSearch&&!this.anySearching&&this.searchManager&&this.searchManager.last&&this.searchManager.last.docType&&this.searchManager.last.docType.amount&&this.searchManager.last?.docType.score}scrollHandler(t){if(t.offsetWidth<300)return;const n=t.scrollWidth+t.scrollLeft-t.offsetWidth;n<100&&(this.gotMore||(this.gotMore=!0,this.searchManager.getMore(),this.searchManager.searchResults.pipe((0,Oe.q)(2),function Pe(r){return(0,Y.h)((t,n)=>r<=n)}(1)).subscribe(()=>{this.gotMore=!1}))),this.showRightFade=t.scrollLeft<-320,this.showLeftFade=this.layout.mobile?0===t.scrollLeft:n>0}titleClicked(){this.clicked.emit(!0)}optionClicked(t){if(this.docType.filterMenu&&this.docType.filterMenu.length>0){for(const n of this.docType.filterMenu[0].options)if(n.id===t.id){this.docType.filterMenu[0].selected=n;break}this.clicked.emit(!0)}}scroll(t){const n=this.cards.nativeElement;n.scrollBy({left:.8*n.offsetWidth*t,behavior:"smooth"})}}).\u0275fac=function(t){return new(t||O)(e.Y36(y),e.Y36(d.m),e.Y36(L.P))},O.\u0275cmp=e.Xpm({type:O,selectors:[["horizontal-results"]],viewQuery:function(t,n){if(1&t&&e.Gf(Fe,5),2&t){let o;e.iGM(o=e.CRH())&&(n.cards=o.first)}},inputs:{docType:"docType",state:"state",anySearching:"anySearching",bare:"bare"},outputs:{searching:"searching",clicked:"clicked"},decls:2,vars:4,consts:[[1,"host"],[4,"ngIf"],["class","title",3,"click",4,"ngIf"],["class","precard layout-mobile",4,"ngIf"],[1,"results"],[1,"right-fade","layout-desktop",3,"click"],[1,"cards"],["cards",""],["class","precard layout-desktop",4,"ngIf"],[3,"item","index","kind","horizontal","bare",4,"ngFor","ngForOf"],["class","loading",4,"ngIf"],[1,"left-fade",3,"click"],["class","filtered",4,"ngIf"],[1,"title",3,"click"],[1,"precard","layout-mobile"],[1,"precard","layout-desktop"],[3,"item","index","kind","horizontal","bare"],[1,"loading"],[1,"filtered"],[4,"ngFor","ngForOf"],[3,"name","amount","select",4,"ngIf"],[3,"name","amount","select"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,$e,13,15,"ng-container",1),e.qZA()),2&t&&(e.ekj("shown",n.shouldShow()),e.uIk("data-doc-type",n.docType.id),e.xp6(1),e.Q6J("ngIf",n.searchManager))},dependencies:[g.sg,g.O5,U.B,G,g.Ov,g.JJ],styles:['.font-gadi[_ngcontent-%COMP%]{font-family:Gadi Almog,sans-serif;font-style:normal}.font-abraham[_ngcontent-%COMP%]{font-family:Abraham TRIAL,sans-serif;font-style:normal}.font-miriam[_ngcontent-%COMP%]{font-family:Miriam Libre,sans-serif;font-style:normal}.background-image[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:center;background-size:contain}.no-scrollbars[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:-ms-autohiding-scrollbar}.no-scrollbars[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.ellipsis-2-line[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;display:-webkit-box!important;-webkit-line-clamp:2;-webkit-box-orient:vertical;white-space:normal}@media only screen and (max-width: 999px){  .layout-desktop{display:none!important}}@media only screen and (min-width: 1000px){  .layout-mobile{display:none!important}}  .display-none{display:block;width:0;height:0;overflow:hidden}.loading[_ngcontent-%COMP%]{box-sizing:border-box;overflow:hidden;position:relative;background:#eff1f6 no-repeat;display:inline-block;will-change:transform;transform:translateZ(0)}.loading[_ngcontent-%COMP%]:after, .loading[_ngcontent-%COMP%]:before{box-sizing:border-box}.loading[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_progress 2s ease-in-out infinite;background-size:200px 100%;position:absolute;z-index:1;top:0;left:0;width:200px;height:100%;content:""}.loading[_ngcontent-%COMP%]:before{background-image:linear-gradient(90deg,rgba(255,255,255,0),rgba(255,255,255,.6),rgba(255,255,255,0))}@keyframes _ngcontent-%COMP%_progress{0%{transform:translate3d(-200px,0,0)}to{transform:translate3d(calc(200px + 100vw),0,0)}}[_nghost-%COMP%]{display:flex;flex-flow:column;align-items:center;width:100%;max-width:800px;overflow:visible}.host[_ngcontent-%COMP%]{display:flex;flex-flow:column;align-items:flex-start;width:100%;position:relative;border:1px solid #dadada;border-radius:6px;margin-top:60px;margin-bottom:10px}@media only screen and (max-width: 999px){.host[_ngcontent-%COMP%]{margin-top:30px}}.host[_ngcontent-%COMP%]:not(.shown){display:none;margin:0}.host[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:relative;display:block;padding:0 8px;background-color:#fafafa;font-size:22px;font-weight:400;font-family:Abraham TRIAL,sans-serif;font-style:normal;top:-16px;right:16px;margin-bottom:-32px;cursor:pointer}.host[_ngcontent-%COMP%]   .precard[_ngcontent-%COMP%]{display:flex;align-self:stretch;flex:0 0 auto;border-radius:4px;border:1px solid #edeef0;font-family:Abraham TRIAL,sans-serif;font-style:normal;font-size:16px;font-weight:400;color:#7d7d7d;background-color:#fff}@media only screen and (min-width: 1000px){.host[_ngcontent-%COMP%]   .precard[_ngcontent-%COMP%]{width:240px;margin:16px 16px 16px 8px;padding:8px;scroll-snap-align:end}}@media only screen and (max-width: 999px){.host[_ngcontent-%COMP%]   .precard[_ngcontent-%COMP%]{width:100%;margin:0;padding:16px 8px 8px}}.host[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]{width:100%;position:relative}.host[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{display:flex;flex-flow:row;align-items:flex-start;overflow-x:scroll;overflow-y:hidden;width:100%;scroll-snap-type:x mandatory;scroll-behavior:smooth;overscroll-behavior-x:contain;scrollbar-width:none}.host[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   search-result[_ngcontent-%COMP%]{max-width:320px;width:100%;flex:0 0 100%;margin:16px 8px;scroll-snap-align:center}.host[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{transform:none}.host[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .cards.refresh[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{transform:translatez(0)}.host[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{width:240px;align-self:stretch;flex:0 0 auto;margin:16px 16px 16px 8px;border-radius:4px}.host[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .left-fade[_ngcontent-%COMP%]{left:0;background:linear-gradient(to left,rgba(250,250,250,0) 0%,#fafafa 100%),url(chevron-left.fd1ecf6ab69d5cff.svg) center / contain no-repeat}.host[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .right-fade[_ngcontent-%COMP%]{right:0;background:linear-gradient(to right,rgba(250,250,250,0) 0%,#fafafa 100%),url(chevron-right.411ff6c6c2319239.svg) center / contain no-repeat}.host[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .right-fade[_ngcontent-%COMP%], .host[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .left-fade[_ngcontent-%COMP%]{height:calc(100% - 10px);top:5px;position:absolute;width:40px;pointer-events:none;z-index:-1;opacity:0;transition-property:opacity z-index;transition-duration:.25s;transition-timing-function:linear}.host[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .right-fade.visible[_ngcontent-%COMP%], .host[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .left-fade.visible[_ngcontent-%COMP%]{opacity:1;z-index:10}@media only screen and (min-width: 600px){.host[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .right-fade.visible[_ngcontent-%COMP%], .host[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .left-fade.visible[_ngcontent-%COMP%]{pointer-events:all;cursor:pointer}}.host[_ngcontent-%COMP%]   .filtered[_ngcontent-%COMP%]{display:flex;flex-flow:row;min-height:48px;width:100%;align-items:center;padding:6px;border-top:1px solid #dadada;flex-wrap:wrap}.host[_ngcontent-%COMP%]   .filtered[_ngcontent-%COMP%]   search-tag[_ngcontent-%COMP%]{cursor:pointer}']}),O);function Le(r,t){if(1&r&&(e.ynx(0),e.TgZ(1,"option",6),e._uU(2),e.qZA(),e.BQk()),2&r){const n=t.$implicit;e.xp6(1),e.Q6J("ngValue",n),e.xp6(1),e.Oqu(n.display)}}F=(0,C.gn)([(0,h.c)(),(0,C.w6)("design:paramtypes",[y,d.m,L.P])],F);let Ue=(()=>{var r;class t{constructor(){this.selected=new e.vpe}set selectedOption(o){this.menu.selected=o,this.selected.emit(o)}get selectedOption(){return this.menu.selected}}return(r=t).\u0275fac=function(o){return new(o||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["search-filter-menu"]],inputs:{menu:"menu"},outputs:{selected:"selected"},decls:7,vars:3,consts:[[1,"filter-menu"],[1,"filter-menu-label"],[1,"select"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["src","assets/search/img/select-dropdown.svg"],[3,"ngValue"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"select",3),e.NdJ("ngModelChange",function(a){return s.selectedOption=a}),e.YNc(5,Le,3,2,"ng-container",4),e.qZA(),e._UZ(6,"img",5),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(s.menu.display),e.xp6(2),e.Q6J("ngModel",s.selectedOption),e.xp6(1),e.Q6J("ngForOf",s.menu.options))},dependencies:[g.sg,_.YN,_.Kr,_.EJ,_.JJ,_.On],styles:[".filter-menu[_ngcontent-%COMP%]{display:flex;flex-flow:column;margin-left:10px}.filter-menu[_ngcontent-%COMP%]   .filter-menu-label[_ngcontent-%COMP%]{font-style:normal;font-weight:700;font-size:14px;line-height:19px;margin-bottom:4px}.filter-menu[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{display:flex;flex-flow:row;align-items:center;position:relative}.filter-menu[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid #E6E6E6;border-radius:4px;height:34px;font-weight:400;font-size:12px;line-height:16px;padding:0 10px 0 20px;-webkit-appearance:none;appearance:none}.filter-menu[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;pointer-events:none;left:8px}"]}),t})();function Ge(r,t){if(1&r){const n=e.EpF();e.ynx(0),e.TgZ(1,"search-filter-menu",2),e.NdJ("selected",function(s){e.CHM(n);const i=e.oxw();return e.KtG(i.onSelected(s))}),e.qZA(),e.BQk()}if(2&r){const n=t.$implicit;e.xp6(1),e.Q6J("menu",n)}}let je=(()=>{var r;class t{constructor(){this.bare=!1,this.selected=new e.vpe}onSelected(o){this.selected.emit(o)}}return(r=t).\u0275fac=function(o){return new(o||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["search-filter-menu-bar"]],inputs:{menus:"menus",bare:"bare"},outputs:{selected:"selected"},decls:2,vars:3,consts:[[1,"search-filter-bar"],[4,"ngFor","ngForOf"],[3,"menu","selected"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0),e.YNc(1,Ge,2,1,"ng-container",1),e.qZA()),2&o&&(e.ekj("bare",s.bare),e.xp6(1),e.Q6J("ngForOf",s.menus))},dependencies:[g.sg,Ue],styles:['.font-gadi[_ngcontent-%COMP%]{font-family:Gadi Almog,sans-serif;font-style:normal}.font-abraham[_ngcontent-%COMP%]{font-family:Abraham TRIAL,sans-serif;font-style:normal}.font-miriam[_ngcontent-%COMP%]{font-family:Miriam Libre,sans-serif;font-style:normal}.background-image[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:center;background-size:contain}.no-scrollbars[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:-ms-autohiding-scrollbar}.no-scrollbars[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.ellipsis-2-line[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;display:-webkit-box!important;-webkit-line-clamp:2;-webkit-box-orient:vertical;white-space:normal}@media only screen and (max-width: 999px){  .layout-desktop{display:none!important}}@media only screen and (min-width: 1000px){  .layout-mobile{display:none!important}}  .display-none{display:block;width:0;height:0;overflow:hidden}.loading[_ngcontent-%COMP%]{box-sizing:border-box;overflow:hidden;position:relative;background:#eff1f6 no-repeat;display:inline-block;will-change:transform;transform:translateZ(0)}.loading[_ngcontent-%COMP%]:after, .loading[_ngcontent-%COMP%]:before{box-sizing:border-box}.loading[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_progress 2s ease-in-out infinite;background-size:200px 100%;position:absolute;z-index:1;top:0;left:0;width:200px;height:100%;content:""}.loading[_ngcontent-%COMP%]:before{background-image:linear-gradient(90deg,rgba(255,255,255,0),rgba(255,255,255,.6),rgba(255,255,255,0))}@keyframes _ngcontent-%COMP%_progress{0%{transform:translate3d(-200px,0,0)}to{transform:translate3d(calc(200px + 100vw),0,0)}}[_nghost-%COMP%]{padding:16px}[_nghost-%COMP%]   .search-filter-bar[_ngcontent-%COMP%]{display:flex;width:100%;flex-flow:row wrap}']}),t})();function Ke(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"vertical-results",2),e.NdJ("searching",function(s){e.CHM(n);const i=e.oxw();return e.KtG(i.onSearching(s))}),e.qZA()}if(2&r){const n=e.oxw();e.Q6J("state",n.state)("bare",n.bare)}}function qe(r,t){if(1&r){const n=e.EpF();e.ynx(0),e.TgZ(1,"horizontal-results",4),e.NdJ("searching",function(s){const a=e.CHM(n).$implicit,l=e.oxw(2);return e.KtG(l.onSingleSearching(a.id,s))})("clicked",function(){const i=e.CHM(n).$implicit,a=e.oxw(2);return e.KtG(a.state.docType=i)}),e.qZA(),e.BQk()}if(2&r){const n=t.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("docType",n)("state",o.state)("anySearching",o.anySearching)("bare",o.bare)}}function Xe(r,t){if(1&r&&(e.ynx(0),e.YNc(1,qe,2,4,"ng-container",3),e.BQk()),2&r){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.sortedDocTypes())}}let j=(()=>{var r;class t{constructor(o,s){this.api=o,this.globalSettings=s,this.bare=!1,this.searching=new e.vpe,this.multiSearching={},this.anySearching=!1}ngOnInit(){}onSearching(o){this.searching.emit(o)}onSingleSearching(o,s){this.multiSearching[o]=s;const i=Object.values(this.multiSearching).filter(a=>a).length>0;this.searching.emit(i)}cmp(o,s,i,a){return o[i]>s[i]?-1:o[i]===s[i]?a:1}sortedDocTypes(){let o=this.globalSettings.theme.searchBarConfig.slice();return this.globalSettings.theme.keepDocTypesOrder||(o=o.sort((s,i)=>this.cmp(s,i,"score",this.cmp(s,i,"amount",0)))),o}}return(r=t).\u0275fac=function(o){return new(o||r)(e.Y36(y),e.Y36(x.o))},r.\u0275cmp=e.Xpm({type:r,selectors:[["search-mode-selector"]],inputs:{state:"state",bare:"bare"},outputs:{searching:"searching"},decls:3,vars:4,consts:[[3,"state","bare","searching",4,"ngIf"],[4,"ngIf"],[3,"state","bare","searching"],[4,"ngFor","ngForOf"],[3,"docType","state","anySearching","bare","searching","clicked"]],template:function(o,s){1&o&&(e.TgZ(0,"div"),e.YNc(1,Ke,1,2,"vertical-results",0),e.YNc(2,Xe,2,1,"ng-container",1),e.qZA()),2&o&&(e.ekj("bare",s.bare),e.xp6(1),e.Q6J("ngIf","all"!==s.state.docType.id),e.xp6(1),e.Q6J("ngIf","all"===s.state.docType.id))},styles:["[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;display:flex;flex-flow:column;align-items:center}[_nghost-%COMP%] > div.bare[_ngcontent-%COMP%]     .bottom-line{display:none}[_nghost-%COMP%] > div.bare[_ngcontent-%COMP%]     .body.dashing{border:none}[_nghost-%COMP%] > div.bare[_ngcontent-%COMP%]     horizontal-results .filtered{display:none}[_nghost-%COMP%] > div.bare[_ngcontent-%COMP%]     horizontal-results search-result .card .body{height:100%;min-height:102px;flex:1 1 auto}[_nghost-%COMP%] > div.bare[_ngcontent-%COMP%]     horizontal-results search-result .card .body .main-content .parties{margin:8px 0}"]}),t})();var P,Ve=c(1374);const We=["more"];function et(r,t){if(1&r&&(e.ynx(0),e._UZ(1,"search-result",5),e.BQk()),2&r){const n=t.$implicit,o=t.index,s=e.oxw();e.xp6(1),e.Q6J("item",n)("index",o)("kind",n.type)("bare",s.bare)}}function tt(r,t){1&r&&e._UZ(0,"div",6)}const nt=function(){return[]};let Z=((P=class{constructor(t,n,o){this.searchService=t,this.globalSettings=n,this.ps=o,this.bare=!1,this.searching=new e.vpe,this.gotMore=!1}ngOnInit(){this.searchManager=new $(this.searchService,this.state,this.globalSettings.theme.searchBarConfig,300,this),this.searchManager.searchResults.pipe((0,h.t)(this)).subscribe(t=>{this.lastOutcome=t,this.searching.emit(t.isSearching)})}ngAfterViewInit(){this.ps.browser(()=>{this.moreObserver=new IntersectionObserver(t=>{t[0].isIntersecting&&(this.gotMore||(this.gotMore=!0,this.searchManager.getMore(),this.searchManager.searchResults.pipe((0,Ve.P)()).subscribe(()=>{this.gotMore=!1})))}),this.moreObserver.observe(this.moreElement?.nativeElement)})}ngOnDestroy(){}getStatusText(){return this.lastOutcome?this.lastOutcome.isSearching?"\u05d8\u05d5\u05e2\u05df&hellip;":this.lastOutcome.isErrorInLastSearch?"\u05d0\u05d9\u05e8\u05e2\u05d4 \u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d7\u05d9\u05e4\u05d5\u05e9, \u05e0\u05e1\u05d5 \u05e9\u05d5\u05d1":0===this.searchManager.allResults.length?this.state.term?"\u05d0\u05d9\u05df \u05ea\u05d5\u05e6\u05d0\u05d5\u05ea":this.globalSettings.theme.sampleSearches?"<b>\u05d7\u05d9\u05e4\u05d5\u05e9\u05d9\u05dd \u05dc\u05d3\u05d5\u05d2\u05de\u05d4:</b> "+this.globalSettings.theme.sampleSearches.join(", ")+"&hellip;":"\u05e9\u05d5\u05e8\u05ea \u05d4\u05d7\u05d9\u05e4\u05d5\u05e9 \u05e8\u05d9\u05e7\u05d4. \u05d1\u05e6\u05e2\u05d5 \u05d7\u05d9\u05e4\u05d5\u05e9 \u05db\u05dc\u05e9\u05d4\u05d5":"":""}}).\u0275fac=function(t){return new(t||P)(e.Y36(y),e.Y36(x.o),e.Y36(d.m))},P.\u0275cmp=e.Xpm({type:P,selectors:[["vertical-results"]],viewQuery:function(t,n){if(1&t&&e.Gf(We,5),2&t){let o;e.iGM(o=e.CRH())&&(n.moreElement=o.first)}},inputs:{state:"state",bare:"bare"},outputs:{searching:"searching"},decls:6,vars:6,consts:[[1,"search_body"],[4,"ngFor","ngForOf"],["class","loading",4,"ngIf"],[1,"status",3,"innerHtml"],["more",""],[3,"item","index","kind","bare"],[1,"loading"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,et,2,4,"ng-container",1),e.ALo(2,"async"),e.YNc(3,tt,1,0,"div",2),e._UZ(4,"div",3,4),e.qZA()),2&t){let o;e.xp6(1),e.Q6J("ngForOf",(null==(o=e.lcZ(2,3,n.searchManager.searchResults))?null:o.docs)||e.DdM(5,nt)),e.xp6(2),e.Q6J("ngIf",!n.searchManager.done),e.xp6(1),e.Q6J("innerHtml",n.getStatusText(),e.oJD)}},dependencies:[g.sg,g.O5,U.B,g.Ov],styles:['.font-gadi[_ngcontent-%COMP%]{font-family:Gadi Almog,sans-serif;font-style:normal}.font-abraham[_ngcontent-%COMP%]{font-family:Abraham TRIAL,sans-serif;font-style:normal}.font-miriam[_ngcontent-%COMP%]{font-family:Miriam Libre,sans-serif;font-style:normal}.background-image[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:center;background-size:contain}.no-scrollbars[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:-ms-autohiding-scrollbar}.no-scrollbars[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.ellipsis-2-line[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;display:-webkit-box!important;-webkit-line-clamp:2;-webkit-box-orient:vertical;white-space:normal}@media only screen and (max-width: 999px){  .layout-desktop{display:none!important}}@media only screen and (min-width: 1000px){  .layout-mobile{display:none!important}}  .display-none{display:block;width:0;height:0;overflow:hidden}.loading[_ngcontent-%COMP%]{box-sizing:border-box;overflow:hidden;position:relative;background:#eff1f6 no-repeat;display:inline-block;will-change:transform;transform:translateZ(0)}.loading[_ngcontent-%COMP%]:after, .loading[_ngcontent-%COMP%]:before{box-sizing:border-box}.loading[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_progress 2s ease-in-out infinite;background-size:200px 100%;position:absolute;z-index:1;top:0;left:0;width:200px;height:100%;content:""}.loading[_ngcontent-%COMP%]:before{background-image:linear-gradient(90deg,rgba(255,255,255,0),rgba(255,255,255,.6),rgba(255,255,255,0))}@keyframes _ngcontent-%COMP%_progress{0%{transform:translate3d(-200px,0,0)}to{transform:translate3d(calc(200px + 100vw),0,0)}}[_nghost-%COMP%]{display:flex;flex-flow:column;align-items:center;width:100%;overflow:hidden}[_nghost-%COMP%]   .search_body[_ngcontent-%COMP%]{display:flex;flex-flow:column;gap:20px;max-width:800px;width:100%;padding:8px 0}[_nghost-%COMP%]   .search_body[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{height:120px;width:100%;max-width:800px}']}),P);Z=(0,C.gn)([(0,h.c)(),(0,C.w6)("design:paramtypes",[y,x.o,d.m])],Z);var ot=c(8691);let rt=(()=>{var r;class t{}return(r=t).\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[y],imports:[g.ez,me.U,_.u5,ue,ot.M]}),t})();e.B6R(T,[g.sg,g.O5,Q.Fn,Ce,je,j,G],[g.JJ]),e.B6R(j,[g.sg,g.O5,F,Z],[])}}]);